---
title: "Install R, packages and other relevant software"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Install R, packages and other relevant software}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

## Installing R and RStudio

Since `globiomvis` is an R package, R is required. R can be downloaded [here](https://cran.r-project.org). On Linux, you can instead install R with the package manager of your distribution.

We highly recommend to also install the RStudio integrated development environment. It can be downloaded [here](https://rstudio.com/products/rstudio/download/). It will allow you to easily try the examples and debug your code. Some of the discussion that follows assumes that you have RStudio installed.

## A note on R packages

Packages are bundles containing R scripts, and frequently also includes code written in other languages (e.g. C or C++) that speeds up calculations or interfaces with other software (e.g. GAMS). Packages can easily be installed by typing `install.packages("PACKAGE_NAME")` or by clicking on the 'package' tab in RStudio. Most packages can be downloaded from CRAN, the official R package repository.

The `globiomvis` package depends on other R packages. A large subset of these are jointly referred to as the [tidyverse](https://www.tidyverse.org/), a curated package collection that includes `dplyr`, `purrr`, `tidyr` and `ggplot2`.

Installing packages sometimes results in conflicts when an older version of these packages is already installed on your system and has been loaded into memory. To prevent this, install packages immediately after (re)starting R. If you get the message `These package have more recent versions available. It is recommended to update all of them. Which would you like to update?`, the conservative choice is  to select `3: None`: you can always update later after further deliberation.

## Installing globiomvis


From an R or RStudio console, installing the `globiomvis` package can be as simple as:

```{r, eval=FALSE}
# Install the devtools package, if you have not done si already
install.packages("devtools")
# Install globiomvis development version from GitHub, it is not available on CRAN
devtools::install_github("iiasa/globiomvis")
```


This should also install all further required packages, but the `gdxrrw` package will fail to install if your system lacks a compiler. You can either install the required compiler tools, which will add a lot of stuff to your system, or you can install a binary version of the `gdxrrw` package as documented in the next section.

## Installing a gdxrrw binary package

To read/write GDX files from R, the `gdxrrw` package is required. This package is not available on CRAN and therefore cannot be installed using the standard approach (see next section). The package can be found [here](https://support.gams.com/gdxrrw:interfacing_gams_and_r)

To install `gdxrrw` without compiling, download the latest binary package built for your operating system and R version (if you have R version 3.5.X install the `gdxrrw` version that is built with R 3.5.x) and save the package archive file to a tempory directory. Then:

1. Click 'Packages' > 'install' in RStudio
2. Select 'Install from: Package Archive File (.zip; .tar; .gz)
3. Select the package archive file in the temporary directory to install the package in your R library

## Installing compiler tools

Linux should already have a compiler installed. On Windows, compiling code in R source-only packages requires an [Rtools](https://cran.r-project.org/bin/windows/Rtools) installation. On MacOS, the [development tools and libraries](https://cran.r-project.org/bin/macosx/tools) are required for compilaton.

After having installed these tools, performing the `globiomvis` installation as explained above should succeed in installing `gdxrrw`.

## Using gdxrrw

For `gdxrrw` to work, the package needs to load GDX libraries from the GAMS system directory. Use the `igdx()` function to tell `gdxrrw` where it can find GAMS. There are multiple ways to do so as explained in the `igdx` help page:

```{r, eval=FALSE}
library(gdxrrw)
help(igdx)
```

You can specify the GAMS system directory explicitely. For example:

```{r, eval=FALSE}
igdx("C:/GAMS/win64/29.1")
```

However, we recommended to set the `R_GAMS_SYSDIR` environment variable. For details see [here](https://iiasa.github.io/GLOBIOM/R.html). After setting `R_GAMS_SYSDIR`, you should be able to load the GDX libraries by passing an empty string as first argument to `igdx`:

```{r, eval=FALSE}
igdx("")
```

In the examples that follow, it is assumed that you have set `R_GAMS_SYSDIR`.

## Additional software

Although not strictly necessary to use globiomvis (for now), we recommend installing the following additional software:

- osgeo4w. This is a collection of open source geospatial software for windows and can be downloaded [here](https://trac.osgeo.org/osgeo4w). Most important part is gdal, which is a very powerful translator library for raster and vector geospatial data formats. It is used by several R packages that process raster and vector data and is normally much faster than processing this data within R. osgeo4w is only available for windows. gdal for other systems can be downloaded [here](https://gdal.org/download.html).

- miktex. This is (one of) implementations of TeX/LaTeX and related programs. RStudio facilitates the use of LaTex through Rmarkdown but this requires the installation of [miktex](https://miktex.org). If you want to learn more about this look [here](https://bookdown.org/yihui/rmarkdown/)

- git. This is software to version you code and can be downloaded [here](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git). RStudio and git can be easily linked to version your code and use [github](https://github.com) to store code in the cloud and facilitate collaborative code development. More information about how to set this up can be found [here](https://www.r-bloggers.com/rstudio-and-github/) and [here](https://www.r-bloggers.com/using-rstudio-and-git-version-control/).
